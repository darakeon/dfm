@using DFM.MVC.Areas.Account.Models
@model BaseSiteModel

@{ var model = Model as BaseAccountModel; }

<nav class="navbar navbar-default navbar-fixed-top">
	<div class="container">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-2">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>

			@if (ViewBag.HideTopLogo == null)
			{
				<a href="/" class="navbar-brand">Don't fly Money</a>
			}
		</div>

		<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-2">
			<ul class="nav navbar-nav navbar-right">
				<li>
					@Html.Partial("MenuIssues")
				</li>

				<li>
					@Html.Partial("MenuTasks")
				</li>

				@if (!Model.IsAuthenticated)
				{
					<li>@Html.RouteLink(Translator.Dictionary["Login"], RouteNames.DEFAULT, new {action = "LogOn", controller = "Users"})</li>
					<li>@Html.RouteLink(Translator.Dictionary["SignUp"], RouteNames.DEFAULT, new {action = "SignUp", controller = "Users"})</li>
					<li>@Html.ActionLink(Translator.Dictionary["TokenReceivedByEmail"], "Index", "Tokens")</li>
				}
				else
				{
					if (Model.IsExternal)
					{
						<li>@Html.RouteLink(Translator.Dictionary["Enter"], RouteNames.DEFAULT, new {action = "Index", controller = "Accounts"})</li>
					}
					else if (model == null)
					{
						<li>@Html.RouteLink(Translator.Dictionary["Accounts"], RouteNames.DEFAULT, new { action = "Index", controller = "Accounts" })</li>

						if (Model.IsUsingCategories)
						{
						<li>@Html.RouteLink(Translator.Dictionary["Categories"], RouteNames.DEFAULT, new { action = "Index", controller = "Categories" })</li>
						}

						<li>@Html.RouteLink(Translator.Dictionary["Schedules"], RouteNames.DEFAULT, new { action = "Index", controller = "Schedules" })</li>
						<li>@Html.RouteLink(Translator.Dictionary["Logins"], RouteNames.DEFAULT, new { action = "Index", controller = "Logins" })</li>
					}
					else
					{
						if (model.Account.IsOpen())
						{
							<li>@Html.ActionLink(Translator.Dictionary["ToMove"], "Create", "Moves")</li>
							<li>@Html.ActionLink(Translator.Dictionary["Schedule"], "Create", "Schedules")</li>
						}

						<li>@Html.ActionLink(Translator.Dictionary["MonthMoves"], "ShowMoves", "Reports")</li>
						<li>@Html.ActionLink(Translator.Dictionary["YearMoves"], "SummarizeMonths", "Reports")</li>

						<li>
							<a href="@Url.RouteUrl(RouteNames.DEFAULT, new {action = "Index", controller = "Accounts"})">
								<span class="glyphicon glyphicon-home" title="@Translator.Dictionary["Home"]"></span>
							</a>
						</li>
					}

					<li>
						@Html.Partial("MenuSettings")
					</li>

					<li>
						<a>
							@Html.Partial("MicroForm",
								MicroForm.WithGlyph("off", "Logoff")
									.AddRouteUrl(RouteNames.DEFAULT, "Users", "LogOff")
							)
						</a>
					</li>
				}

				@*<li class="active">
					<a href="#">Link <span class="sr-only">(current)</span></a>
				</li>*@

			</ul>
		</div>
	</div>
</nav>
