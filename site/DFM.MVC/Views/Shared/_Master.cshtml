@using DFM.Generic

@{
	var isAuthenticated = Auth.Current.IsAuthenticated;

	var routeValues = isAuthenticated
		? new { controller = "Accounts", action = "Index" }
		: new { controller = "Users", action = "Index" };

	var hasSummaryToShow = 
		!Html.ViewData.ModelState.IsValid
		&& Html.ViewData.ModelState.ContainsKey("");

	var hasSomethingToShow =
		hasSummaryToShow
		|| ErrorAlert.Any();
}

<!DOCTYPE html>

<html>
	<head>
		<title>DFM - @ViewBag.Title</title>

		<link rel="icon" href="/Assets/image/pig.ico" />

		<link href="/Assets/css/libraries/datepicker.css" rel="stylesheet" type="text/css" />

		<link href="/Assets/css/mvc.css" rel="stylesheet" type="text/css" />
		<link href="/Assets/css/general.css" rel="stylesheet" type="text/css" />
		<link href="/Assets/css/half-screen.css" rel="stylesheet" type="text/css" />
		<link href="/Assets/css/two-columns.css" rel="stylesheet" type="text/css" />
		<link href="/Assets/css/forms.css" rel="stylesheet" type="text/css" />
		<link href="/Assets/css/top-right-div.css" rel="stylesheet" type="text/css" />
		<link href="/Assets/css/menu.css" rel="stylesheet" type="text/css" />
		<link href="/Assets/css/modal.css" rel="stylesheet" type="text/css" />

		<link href="/Assets/css/ieca.css" rel="stylesheet" type="text/css" />

		@RenderSection("HtmlHeadCss", false)


		<script src="/Assets/script/Libraries/jquery-1.6.2.min.js" type="text/javascript"></script>
		<script src="/Assets/script/Libraries/jquery.validate.min.js" type="text/javascript"></script>
		<script src="/Assets/script/Libraries/jquery.validate.unobtrusive.min.js" type="text/javascript"></script>
		<script src="/Assets/script/Libraries/jquery.unobtrusive-ajax.min.js" type="text/javascript"></script>
		<script src="/Assets/script/Libraries/jquery-ui-1.8.16.custom.min.js" type="text/javascript"></script>
	</head>
	<body>
		
		<div id="shadow-bound">
			@if (hasSomethingToShow)
			{
				<div id="warning">
					@Html.ValidationSummary(true)

					<ul>
						@foreach (var error in ErrorAlert.GetAndClean())
						{
							<li>@error</li>
						}
					</ul>
				</div>
			}
		</div>
		
		<div id="head">

			<a class="logo" href="@Url.RouteUrl(RouteNames.DEFAULT, routeValues)">
				<img alt="DFM" src="/Assets/image/pig.gif" />
				<img alt="DFM" src="/Assets/image/logo.gif" />
			</a>

			<div class="menu">
				@RenderSection("MenuTopo")
			</div>
		</div>

		<div id="body">

			<div id="main">

				@{/* Made without spaces to hide when empty */}
				<div id="top-right-div">@RenderSection("TopRightDiv", false)</div>

				<h2>@ViewBag.Title</h2>

				@RenderBody()

				<div id="PS">
					@RenderSection("PS", false)
				</div>

			</div>

		</div>

		<div id="Footer">
			Don't fly Money<br />
			@Cfg.Version<br />
			2011
		</div>

		<div id="Advertising">
			<a href="http://www.queroumbicho.com.br" target="_blank">
				<img width="150" height="60" src="/assets/image/advertising/quero_um_bicho.gif" />
			</a>

			<!--a href="http://www.pea.org.br/" target="_blank">
				<img width="71" height="60" src="/assets/image/advertising/pea.jpg" />
			</a-->

			<!--a href="http://www.darakeon.com/" target="_blank">
				<img width="60" height="60" src="/assets/image/advertising/darakeon.gif" />
			</a-->
		</div>
	</body>
	<footer>
		<script src="/Assets/script/Libraries/jquery.maskedinput-1.3.min.js" type="text/javascript"></script>
		<script src="/Assets/script/Libraries/jquery.maskMoney.0.2.js" type="text/javascript"></script>


		<script src='/Assets/script/image-link.js' type='text/javascript'></script>
		<script src="/Assets/script/money-date.js" type="text/javascript"></script>
		<script src="/Assets/script/button-href.js" type="text/javascript"></script>
		<script src="/Assets/script/Ajax.js" type="text/javascript"></script>
		<script src="/Assets/script/Detail.js" type="text/javascript"></script>
		<script src="/Assets/script/Navigation.js" type="text/javascript"></script>
		<script src="/Assets/script/Menu.js" type="text/javascript"></script>
		<script src="/Assets/script/Forms.js" type="text/javascript"></script>

		<script src="/Assets/script/Starter.js" type="text/javascript"></script>

		@RenderSection("HtmlFooterJs", false)
	</footer>
</html>