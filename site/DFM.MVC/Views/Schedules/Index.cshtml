@model SchedulesIndexModel

@{
    ViewBag.Title = MultiLanguage.Dictionary["Schedules"];
    Layout = "~/Views/Shared/_NoAreaLayout.cshtml";
}



@if (!Model.ScheduleList.Any())
{ 
    <div class="zero-items">@MultiLanguage.Dictionary["NoSchedules"]</div>
}
else
{    
    <table class="List">

        <tr>
            <th>@MultiLanguage.Dictionary["Description"]</th>
            @if (Auth.Current.User.Config.UseCategories)
            {
                <th>@MultiLanguage.Dictionary["Category"]</th>
            }
            <th>@MultiLanguage.Dictionary["Date"]</th>
            <th>@MultiLanguage.Dictionary["Account", "In"]</th>
            <th>@MultiLanguage.Dictionary["Account", "Out"]</th>
            <th>@MultiLanguage.Dictionary["Value"]</th>
            <th class="todo-column">@MultiLanguage.Dictionary["TODO"]</th>
        </tr>

        @foreach (var schedule in Model.ScheduleList)
        {
            <tr>
                <td>@schedule.Description</td>
                @if (Auth.Current.User.Config.UseCategories)
                {
                    var categoryName =
                        schedule.Category == null
                            ? "---" : schedule.Category.Name;
                    
                    <td>@categoryName </td>
                }
                <td>@schedule.Date.ToShortDateString() </td>

                <td>
                    @(schedule.In != null 
                        ? schedule.In.Name 
                        : " ")
                </td>

                <td>
                    @(schedule.Out != null 
                        ? schedule.Out.Name 
                        : " ")
                </td>

                <td class="@schedule.Nature.ToString().ToLower()">
                    @schedule.Total().ToMoney(Model.Language)
                </td>

                @{
                    var deleteLabel = MultiLanguage.Dictionary["Delete", "TheSchedule"];
                    var deleteUrl = Url.Action("Delete", "Schedules", new { id = schedule.ID });
                    var deleteConfirm = String.Format(MultiLanguage.Dictionary["ConfirmDeleteSchedule"], schedule.Description);
                }

                <td class="image">
                    <a href="@deleteUrl" class="withConfirm" confirm="@deleteConfirm">
                        <img src="/Assets/image/icons/delete.gif" alt="@deleteLabel" title="@deleteLabel" />
                    </a>
                </td>
                
            </tr>

        } 

    </table>
}