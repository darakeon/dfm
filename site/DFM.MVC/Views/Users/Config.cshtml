@using DFM.Generic
@model UsersConfigModel
@{
	ViewBag.Title = Translator.Dictionary["Settings"];
	ViewBag.WizardMessage = Translator.Dictionary["Settings"];
	Layout = "~/Views/Shared/_Form.cshtml";

	var tabs = Enum.GetValues(typeof (UsersConfigModel.Form));

	ViewBag.FormSizeSm = 8;
	ViewBag.FormSizeLg = 6;
}

@section Styles {
	<link rel="stylesheet" type="text/css" href="~/Assets/Styles/qrcode.css" />
	
	<style>body { display: none }</style>

	@foreach (var theme in Model.ThemeOpt.ThemeList)
	{
		<link rel="stylesheet" type="text/css" class="delete-me" style="display: none"
			  href="/Assets/Libs/Themes/bootstrap-@(theme).min.css?v=@Cfg.Version" />
	}
}

@section Scripts {
	<script type="text/javascript" src="~/Assets/Scripts/tab-forms.js"></script>
	<script type="text/javascript" src="~/Assets/Scripts/dynamic-theme-change.js"></script>
	<script type="text/javascript" src="~/Assets/Libs/Scripts/jquery.qrcode.min.js"></script>
	<script type="text/javascript" src="~/Assets/Libs/Scripts/qrcode.min.js"></script>
	<script type="text/javascript" src="~/Assets/Scripts/qrcode.js"></script>
	<script type="text/javascript">
		window.currentTheme = '@Model.Theme';
	</script>
}

<ul class="nav nav-tabs">
	@foreach (var tab in tabs)
	{
		var name = tab.ToString();
		var lower = name.ToLower();

		<li class="@lower-caller">
			<a href="#@lower" data-toggle="tab">
				<small class="tab-text">
					@Translator.Dictionary[$"{name}Settings"]
				</small>
			</a>
		</li>
	}
</ul>

@Html.HiddenFor(m => m.ActiveForm)

<div class="tab-content well-sm">
	@foreach (var tab in tabs)
	{
		var name = tab.ToString();
		var lower = name.ToLower();

		<div class="tab-pane" id="@lower" data-form="@Url.Action($"Config{name}")">
			@Html.Partial($"Config{name}")
		</div>
	}
</div>

@section Footer {
	<button type="submit"
	        class="btn btn-success tab-submit"
	        data-text="@Translator.Dictionary["Save"]">
	</button>
}
