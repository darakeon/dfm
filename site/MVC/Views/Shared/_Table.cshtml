@model BaseSiteModel

@{
	Layout = "_Master.cshtml";
	var buttonList = (List<Button>)ViewBag.Buttons;

	var accountModel = Model as BaseAccountModel;
	var subtitle = accountModel?.Account?.Name;
}

@await Html.PartialAsync("ValidationSummary")

<h1 class="header">
	@ViewBag.Title
	<em>@subtitle</em>
</h1>
<hr />

@if (!ViewBag.HasContent)
{
	<div class="alert alert-warning text-center">
		@ViewBag.NoContentText
	</div>

	if (buttonList != null)
	{
		<div class="text-center">
			@foreach (var button in buttonList.OrderByDescending(b => b.PullLeft))
			{
				@Html.ActionLink(
					button.Text,
					button.Action,
					null,
					null,
					new {@class = "btn btn-default"}
				)
			}
		</div>
	}

	@* No, it shouldn't be here *@
	<div class="hidden">
		@RenderSection("TableHeader", false)
	</div>
}
else
{
	var tableLgSize = ViewBag.TableLgSize ?? 12;
	if (tableLgSize % 2 == 1) { tableLgSize++; }
	var pushLg = 6 - tableLgSize / 2;

	var tableSmSize = ViewBag.TableSmSize ?? 12;
	if (tableSmSize % 2 == 1) { tableSmSize++; }
	var pushSm = 6 - tableSmSize / 2;

	<div class="row">
		<div class="col-lg-@tableLgSize col-lg-push-@pushLg col-sm-@tableSmSize col-sm-push-@pushSm">

			<div class="well-sm">

				<table class="table table-striped table-hover table-responsive">
					<thead>
						@RenderSection("TableHeader", false)
					</thead>
					<tbody>
						@RenderBody()
					</tbody>
				</table>

			</div>

		</div>
	</div>

	if (buttonList != null)
	{
		<div class="text-right">
			@foreach (var button in buttonList)
			{
				@Html.ActionLink(
					button.Text,
					button.Action,
					null,
					null,
					new {@class = "btn btn-default" + (button.PullLeft ? " pull-left" : "")}
				)
			}
		</div>
	}
}

@RenderSection("Footer", false)
