@using DFM.Generic
@model UsersEndWizard

@{
	Layout = Model.HasError
		? "~/Views/Shared/_Result.cshtml"
		: "~/Views/Shared/_Form.cshtml";

	ViewBag.Style = Model.HasError ? "danger" : "";
	ViewBag.Title = Translator.Dictionary["Wizard_Title"];
	ViewBag.FormSizeSm = 10;
	ViewBag.FormSizeLg = 6;
}

@if (Model.HasError)
{
	@Model.Error
}
else
{
	var menus = new List<WizardMenu>
	{
		new WizardMenu(Translator.Dictionary["Wizard_EndTextMenuSettings"], "MenuSettings"),
		new WizardMenu(Translator.Dictionary["Wizard_EndTextMenuTasks"], "MenuTasks"),
		new WizardMenu(Translator.Dictionary["Wizard_EndTextMenuIssues"], "MenuIssues"),
	};

	<p class="text-center">
		@Html.Raw(Translator.Dictionary["Wizard_EndTextThanks"].BreakLines())
	</p>

	<p class="text-center">
		@Translator.Dictionary["Wizard_EndTextMenu"]
	</p>

	<div class="well well-sm">
		@foreach (var menu in menus)
		{
			<div class="row">
				<div class="col-md-9 col-md-push-1">
					@menu.Resource
				</div>
				<div class="col-md-2 text-right">
					@Html.Partial(menu.Partial)
				</div>
			</div>
		}
	</div>

	<p class="text-center">
		@Translator.Dictionary["Wizard_EndTextAndroid"]
	</p>

	<p class="text-center">
		<a href="@Url.RouteUrl(RouteNames.Mobile)"
			target="_blank" class="android-link"></a>
	</p>

	@section Footer {
		<p class="text-center">
			@Html.Raw(String.Format(
				Translator.Dictionary["Wizard_EndTextContact"].BreakLines(),
				"<a target='_blank' href='mailto:dfm@dontflymoney.com'>dfm@dontflymoney.com</a>"
				))
		</p>
	}
}
