@model UsersEndWizardModel

@{
	Layout = Model.HasError
		? "~/Views/Shared/Layouts/_Result.cshtml"
		: "~/Views/Shared/Layouts/_Form.cshtml";

	ViewBag.Style = Model.HasError ? "danger" : "";
	ViewBag.Title = Context.Translate("Wizard_Title");
	ViewBag.FormSizeSm = 10;
	ViewBag.FormSizeLg = 6;

	var mobileRoute = new RouteMobile();
}

@if (Model.HasError)
{
	@Model.Error
}
else
{
	var menus = new List<WizardMenu>
	{
		new WizardMenu(Context.Translate("Wizard_EndTextMenuSettings"), "Skeleton/MenuSettings"),
		new WizardMenu(Context.Translate("Wizard_EndTextMenuTasks"), "Skeleton/MenuTasks"),
		new WizardMenu(Context.Translate("Wizard_EndTextMenuIssues"), "Skeleton/MenuIssues"),
	};

	<p class="text-center">
		@Html.Raw(Context.Translate("Wizard_EndTextThanks").BreakLines())
	</p>

	<p class="text-center">
		@Context.Translate("Wizard_EndTextMenu")
	</p>

	<div class="well well-sm">
		@foreach (var menu in menus)
		{
			<div class="row">
				<div class="col-md-9 col-md-push-1">
					@menu.Resource
				</div>
				<div class="col-md-2 text-right">
					@await Html.PartialAsync(menu.Partial)
				</div>
			</div>
		}
	</div>

	<p class="text-center">
		@Context.Translate("Wizard_EndTextAndroid")
	</p>

	<p class="text-center">
		<a href="@Url.RouteUrl(mobileRoute.Name)"
			target="_blank" class="android-link"></a>
	</p>

	@section Footer {
		<p class="text-center">
			@Html.Raw(String.Format(
				Context.Translate("Wizard_EndTextContact").BreakLines(),
				"<a target='_blank' href='mailto:dfm@dontflymoney.com'>dfm@dontflymoney.com</a>"
				))
		</p>
	}
}
