@model AccountsIndexModel

@{
	ViewBag.Title = Context.Translate("Accounts");

	ViewBag.WizardMessage =
		Model.AccountList.Any()
			? "AccountsIndexFilled"
			: "AccountsIndexEmpty";

	Layout = "~/Views/Shared/_Table.cshtml";

	ViewBag.HasContent = Model.AccountList.Any();
	ViewBag.NoContentText = Context.Translate("NoAccounts");
	ViewBag.Buttons = new List<Button>
	{
		new Button(Context.Translate("ClosedAccounts"), "ListClosed", true),
		new Button(Context.Translate("Create", "Account"), "Create")
	};

	var route = new RouteAccount();
}

@section TableHeader
{
	<tr class="row">
		<th class="col-sm-6">@Context.Translate("Name")</th>
		<th class="col-sm-4 text-center" colspan="3">@Context.Translate("Total")</th>
		<th class="col-sm-2 text-center" colspan="2">@Context.Translate("TODO")</th>
	</tr>
}

@foreach (var account in Model.AccountList)
{
	var sign = Context.Translate($"{account.Sign}Limit");

	<tr class="row">
		<td class="col-sm-6">
			@Html.RouteLink(
				account.Name,
				route.Name,
				new
				{
					accountUrl = account.Url,
					controller = String.Empty,
					area = route.Area,
				}
			)
		</td>

		<td class="col-sm-1"></td>
		<td class="col-sm-2 text-right">
			<span
				class="@Html.Partial("AccountSign", account.Sign) pull-left"
				data-toggle="tooltip" data-placement="bottom" title="@sign"
				data-original-title="@sign"
			></span>

			@Html.Partial("ValueWithSign",
				new ValueWithSign(account.Total, Model.Language))
		</td>
		<td class="col-sm-1"></td>

		<td class="col-sm-1 text-center">
			<a href="@Url.Action("Edit", "Accounts", new {id = account.Url})">
				<span
					class="glyphicon glyphicon-edit"
					title="@Context.Translate("Edit")"
				></span>
			</a>
		</td>

		<td class="col-sm-1 text-center">
			@if (account.HasMoves)
			{
				@Html.Partial("MicroForm",
					MicroForm.WithGlyph(Context, "eye-close", "Close")
						.AddIdUrl("Close", account.Url)
				)
			}
			else
			{
				@Html.Partial("MicroForm",
					MicroForm.WithGlyph(Context, "trash", "Delete")
						.AddIdUrl("Delete", account.Url)
				)
			}
		</td>
	</tr>
}
