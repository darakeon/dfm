apply plugin: 'com.android.application'
apply plugin: 'kotlin-android'
apply plugin: 'kotlin-android-extensions'

android {
	compileSdkVersion 29

	defaultConfig {
		applicationId "com.darakeon.dfm.error_logs"

		versionCode 6
		versionName "$dfm_version"

		minSdkVersion 21
		targetSdkVersion 29
	}

	buildTypes {
		release {
			minifyEnabled false
			proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
			zipAlignEnabled true
		}
		debug {
			applicationIdSuffix '.debug'
		}
	}

	sourceSets {
		debug.resources.srcDirs += 'src/debug/res'
		main.java.srcDirs += 'src/main/kotlin'
		test.java.srcDirs += 'src/test/kotlin'
	}

	testOptions {
		unitTests {
			includeAndroidResources = true
		}
	}

	compileOptions {
		sourceCompatibility "$java_version"
		targetCompatibility "$java_version"
	}

	kotlinOptions {
		jvmTarget = "$java_version"
	}
}

dependencies {
	implementation project(':Lib')

	implementation "com.google.android.gms:play-services-iid:$play_version"
	implementation "org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version"
	implementation "com.squareup.retrofit2:retrofit:$retrofit_version"
	implementation "com.squareup.retrofit2:converter-gson:$retrofit_version"
	implementation "org.jetbrains.kotlin:kotlin-reflect:$kotlin_version"

	testImplementation project(":TestUtils")

	testImplementation "junit:junit:$junit_version"
	testImplementation "org.mockito:mockito-core:$mockito_version"
	testImplementation "org.robolectric:robolectric:$robolectric_version"
	testImplementation "com.squareup.okhttp3:mockwebserver:$mockserver_version"
}

task wrapper(type: Wrapper) {
	gradleVersion = '6.2'
}
