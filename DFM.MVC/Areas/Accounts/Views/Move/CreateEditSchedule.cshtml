@model DFM.MVC.Areas.Accounts.Models.MoveCreateEditScheduleModel
@{
    ViewBag.Title = MultiLanguage.Dictionary[Model.ActionName, "Move"];
    Layout = "~/Views/Shared/Inner/_Layout.cshtml";
}

@section HtmlHeadCss { 
    <link href="/Assets/Css/Pages/MoveCreateEditSchedule.css" rel="stylesheet" type="text/css" />
}

@section HtmlHeadJs {
    <script type="text/javascript">
        var whetherShowAccountListPage = '@Url.Action("ShowAccountList")';
        var addDetailsPage = '@Url.Action("AddDetail")';
        var dayNames = '@MultiLanguage.Dictionary["DayNames"]'.split(",");
    </script>

    <script src='/Assets/Script/Pages/MoveCreateEditSchedule.js' type='text/javascript'></script>
}


<div id="hiddenNewCategory"><div id="newCategory">@Html.Action("Create", "Category", new { @area = String.Empty })</div></div>


@using (Html.BeginForm())
{

    @Html.ValidationSummary(true)
    
    if (Model.Type == DFM.Generic.OperationType.Schedule)
    {
        <div class="createMoveScreenLeft">
            <div>
                @Html.LabelFor(m => m.Frequency, MultiLanguage.Dictionary["Frequency"])<br />
                @Html.DropDownListFor(m => m.Frequency, Model.FrequencySelectList)
            </div>
        </div>
    
        <div class="createMoveScreenRight">
            <div>
                @Html.RadioButtonFor(m => m.Boundless, true, new { @class = "boundlessRadio" }) @(" ")
                @Html.LabelFor(m => m.Boundless, MultiLanguage.Dictionary["Boundless"])<br />

                @Html.RadioButtonFor(m => m.Boundless, false, new { @class = "boundlessRadio" }) @(" ")
                @Html.LabelFor(m => m.Times, MultiLanguage.Dictionary["Repeat"])
                @Html.TextBoxFor(m => m.Times, new { @class = "amount" }) @(" ")
                @Html.LabelFor(m => m.Times, MultiLanguage.Dictionary["Times"])
            </div>
        </div>
    
        <div class="divRowForm">
            @Html.CheckBoxFor(m => m.ShowInstallment)
            @Html.LabelFor(m => m.ShowInstallment, MultiLanguage.Dictionary["ShowInstallment"])
        </div>
    
        <div class="divRowForm">
            <hr />
        </div>
    }

    <div class="createMoveScreenLeft">
        <div>
            @Html.LabelFor(m => m.Description, MultiLanguage.Dictionary["Description"]) 
            @Html.ValidationMessageFor(m => m.Description)<br />
            @Html.TextBoxFor(m => m.Description, new { maxlength = MaximumLength.MoveDescription })
            <span class='input-ps'>@String.Format(MultiLanguage.Dictionary["CharactersMax"], MaximumLength.MoveDescription)</span>
        </div>

        <div>
            @Html.LabelFor(m => m.Move.Date, MultiLanguage.Dictionary["Date"])
            @Html.ValidationMessageFor(m => m.Move.Date)<br />
            @Html.TextBoxFor(m => m.Move.Date, new { @class = "date_notHour", disabled = "disabled" })
        </div>
    </div>
    
    <div class="createMoveScreenRight">
        <div>
            @Html.LabelFor(m => m.CategoryName, MultiLanguage.Dictionary["Category"]) 
            @Html.ValidationMessageFor(m => m.CategoryName)<br />
            @Html.DropDownListFor(m => m.CategoryName, Model.CategorySelectList, "-- " + MultiLanguage.Dictionary["Select"] + " --")

            <a href="#" type="button" id="newCategoryCaller">@MultiLanguage.Dictionary["Create", "Category"]</a>
        </div>

        <div>
            @Html.LabelFor(m => m.Nature, MultiLanguage.Dictionary["Nature"]) 

            @Html.ValidationMessageFor(m => m.Nature)
            @Html.ValidationMessageFor(m => m.AccountName)<br />
        
            @Html.DropDownListFor(m => m.Nature, Model.NatureSelectList, new { @class = "natureSelect" })
            @Html.DropDownListFor(m => m.AccountName, Model.AccountSelectList, "-- " + MultiLanguage.Dictionary["Select"] + " --", new { @class = "accountForTransfer" })
        </div>
    </div>
    
    <div class="divRowForm"><hr /></div>
    
    <div class="createMoveScreenLeft">
        @Html.RadioButtonFor(m => m.IsDetailed, false, new { @class = "detailLevel" })
        @MultiLanguage.Dictionary["JustOneValue"]
    </div> 
        
    <div class="createMoveScreenRight">
        @Html.RadioButtonFor(m => m.IsDetailed, true, new { @class = "detailLevel" })
        @MultiLanguage.Dictionary["Detailed"]
        
        <a href="#" id="addDetailCaller" onclick="AddDetail()">@MultiLanguage.Dictionary["Add", "Detail"]</a>
    </div>

    <div id="oneValue" class="createMoveScreenLeft">
        <table class="List">
            <tr>
                <th>@Html.LabelFor(m => m.Move.DetailList[0].Value, MultiLanguage.Dictionary["Value"])</th>
            </tr>
            <tr>
                <td>@Html.TextBoxFor(m => m.Move.DetailList[0].Value, new { @class = "money" })</td>
            </tr>
        </table>
        
        @Html.HiddenFor(m => m.Move.DetailList[0].FakeID)
    </div>
        
    <table class="createMoveScreenRight">
        <tbody id="details">
            <tr>
                <th>
                    @MultiLanguage.Dictionary["Description"]
                    <span class='input-ps'>@String.Format(MultiLanguage.Dictionary["CharactersMax"], MaximumLength.DetailDescription)</span>
                </th>
                <th>@MultiLanguage.Dictionary["Amount"]</th>
                <th>@MultiLanguage.Dictionary["Value"]</th>
            </tr>

            @for (var d = 0; d < Model.Move.DetailList.Count; d++)
            {
                @Html.Action("AddDetail", new { position = d, id = Model.Move.DetailList[d].ID });
            }
        </tbody>
    </table>
    
    <div id="moveCreateButton">
        <button type="submit">@MultiLanguage.Dictionary[Model.ActionName]!</button>
    </div>

}
