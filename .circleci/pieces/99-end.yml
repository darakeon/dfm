workflows:
  version: 2.1
  build_all:
    jobs:
      - test_ci
      - trufflehog:
          requires:
            - test_ci
      - build_core:
          requires:
            - test_ci
            - trufflehog
      - test_core:
          requires:
            - build_core
      - test_site:
          requires:
            - test_ci
            - build_core
            - trufflehog
      - test_browser:
          requires:
            - test_ci
            - build_core
            - test_site
            - trufflehog
      - test_android:
          requires:
            - test_ci
            - trufflehog
      - test_build_robot:
          requires:
            - test_ci
            - build_core
            - trufflehog
      - version_change:
          filters:
            branches:
              only: /^\d+\.\d+\.\d+\.\d+$/
          requires:
            - test_ci
            - build_core
            - test_core
            - test_site
            - test_browser
            - test_android
            - test_build_robot
            - trufflehog
