Feature: Gr. Export Order

Background:
	Given test user login
		And these settings
			| UseCategories | UseCurrency |
			| true          | true        |
		And I have these accounts
			| Name            | Currency |
			| Account Out     |          |
			| Account In      |          |
			| Account Out EUR | EUR      |
			| Account In BRL  | BRL      |
		And I have these categories
			| Name       |
			| Category 1 |
			| Category 2 |
		And I have moves of
			| Description                                      | Date       | Category   | Nature   | Out             | In             | Value | Conversion | Detail |
			| Sample Move Out                                  | 1986-03-27 | Category 1 | Out      | Account Out     |                | 1     |            |        |
			| Sample Move Out with Details                     | 1988-10-17 | Category 1 | Out      | Account Out     |                | 1     |            | D1     |
			| Sample Move In                                   | 1991-05-10 | Category 1 | In       |                 | Account In     | 1     |            |        |
			| Sample Move In with Details                      | 1993-12-01 | Category 1 | In       |                 | Account In     | 1     |            | D1     |
			| Sample Move Transfer                             | 1996-06-23 | Category 1 | Transfer | Account Out     | Account In     | 1     |            |        |
			| Sample Move Transfer with Details                | 1999-01-14 | Category 1 | Transfer | Account Out     | Account In     | 1     |            | D1     |
			| Sample Move Transfer with Conversion             | 2001-08-07 | Category 1 | Transfer | Account Out EUR | Account In BRL | 1     | 10         |        |
			| Sample Move Transfer with Conversion and Details | 2004-02-28 | Category 1 | Transfer | Account Out EUR | Account In BRL | 1     | 10         | D1     |
			| Sample Move Out                                  | 2006-09-20 | Category 2 | Out      | Account Out     |                | 1     |            |        |
			| Sample Move Out with Details                     | 2009-04-13 | Category 2 | Out      | Account Out     |                | 1     |            | D1     |
			| Sample Move In                                   | 2011-11-04 | Category 2 | In       |                 | Account In     | 1     |            |        |
			| Sample Move In with Details                      | 2014-05-27 | Category 2 | In       |                 | Account In     | 1     |            | D1     |
			| Sample Move Transfer                             | 2016-12-18 | Category 2 | Transfer | Account Out     | Account In     | 1     |            |        |
			| Sample Move Transfer with Details                | 2019-07-11 | Category 2 | Transfer | Account Out     | Account In     | 1     |            | D1     |
			| Sample Move Transfer with Conversion             | 2022-01-31 | Category 2 | Transfer | Account Out EUR | Account In BRL | 1     | 10         |        |
			| Sample Move Transfer with Conversion and Details | 2024-08-24 | Category 2 | Transfer | Account Out EUR | Account In BRL | 1     | 10         | D1     |

Scenario: Gr01. Unlogged user
	Given order start date 1986-03-27
		And order end date 2024-08-24
		And order account account_out
		And order account account_in
		And order account account_out_eur
		And order account account_in_brl
		And order category Category 1
		And order category Category 2
		And an export is ordered
		But I have no logged user (logoff)
	When export order
	Then I will receive this core error: Uninvited
		And there will be no export file
		And order status will be Pending
		And the will have creation and expiration not set
		And email with csv will not be sent
		And the order file will not exist

Scenario: Gr02. No robot user
	Given order start date 1986-03-27
		And order end date 2024-08-24
		And order account account_out
		And order account account_in
		And order account account_out_eur
		And order account account_in_brl
		And order category Category 1
		And order category Category 2
		And an export is ordered
	When export order
	Then I will receive this core error: Uninvited
		And there will be no export file
		And order status will be Pending
		And the will have creation and expiration not set
		And email with csv will not be sent
		And the order file will not exist

Scenario: Gr03. User marked for deletion
	Given order start date 1986-03-27
		And order end date 2024-08-24
		And order account account_out
		And order account account_in
		And order account account_out_eur
		And order account account_in_brl
		And order category Category 1
		And order category Category 2
		And an export is ordered
		But the user is marked for deletion
	When robot user login
		And export order
	Then I will receive this core error: UserDeleted
		And there will be no export file
		And order status will be Error
		And the will have creation and expiration not set
		And email with csv will not be sent
		And the order will be marked as not sent
		And the order file will not exist

Scenario: Gr04. User requested wipe
	Given order start date 1986-03-27
		And order end date 2024-08-24
		And order account account_out
		And order account account_in
		And order account account_out_eur
		And order account account_in_brl
		And order category Category 1
		And order category Category 2
		And an export is ordered
		But the user asked data wipe
	When robot user login
		And export order
	Then I will receive this core error: UserAskedWipe
		And there will be no export file
		And order status will be Error
		And the will have creation and expiration not set
		And email with csv will not be sent
		And the order will be marked as not sent
		And the order file will not exist

Scenario: Gr05. Without sign last contract
	Given order start date 1986-03-27
		And order end date 2024-08-24
		And order account account_out
		And order account account_in
		And order account account_out_eur
		And order account account_in_brl
		And order category Category 1
		And order category Category 2
		And an export is ordered
		But there is a new contract
	When robot user login
		And export order
	Then I will receive this core error: NotSignedLastContract
		And there will be no export file
		And order status will be Error
		And the will have creation and expiration not set
		And email with csv will not be sent
		And the order will be marked as not sent
		And the order file will not exist

Scenario: Gr06. No Categories
	Given these settings
			| UseCategories |
			| false         |
		And order start date 1986-03-27
		And order end date 2024-08-24
		And order account account_out
		And order account account_in
		And order account account_out_eur
		And order account account_in_brl
		And an export is ordered
	When robot user login
		And export order
	Then I will receive no core error
		And order status will be Success
		And the will have creation and expiration set
		And there will be an export file with this content
			| Description                                      | Date       | Category   | Nature   | In             | Out             | Value | Conversion | Description1 | Amount1 | Value1 | Conversion1 | Description2 | Amount2 | Value2 | Conversion2 | Description3 | Amount3 | Value3 | Conversion3 | Description4 | Amount4 | Value4 | Conversion4 | Description5 | Amount5 | Value5 | Conversion5 | Description6 | Amount6 | Value6 | Conversion6 | Description7 | Amount7 | Value7 | Conversion7 | Description8 | Amount8 | Value8 | Conversion8 | Description9 | Amount9 | Value9 | Conversion9 | Description10 | Amount10 | Value10 | Conversion10 | Description11 | Amount11 | Value11 | Conversion11 | Description12 | Amount12 | Value12 | Conversion12 | Description13 | Amount13 | Value13 | Conversion13 | Description14 | Amount14 | Value14 | Conversion14 | Description15 | Amount15 | Value15 | Conversion15 | Description16 | Amount16 | Value16 | Conversion16 | Description17 | Amount17 | Value17 | Conversion17 | Description18 | Amount18 | Value18 | Conversion18 | Description19 | Amount19 | Value19 | Conversion19 | Description20 | Amount20 | Value20 | Conversion20 | Description21 | Amount21 | Value21 | Conversion21 | Description22 | Amount22 | Value22 | Conversion22 | Description23 | Amount23 | Value23 | Conversion23 | Description24 | Amount24 | Value24 | Conversion24 | Description25 | Amount25 | Value25 | Conversion25 | Description26 | Amount26 | Value26 | Conversion26 | Description27 | Amount27 | Value27 | Conversion27 | Description28 | Amount28 | Value28 | Conversion28 | Description29 | Amount29 | Value29 | Conversion29 | Description30 | Amount30 | Value30 | Conversion30 |
			| Sample Move Out                                  | 1986-03-27 | Category 1 | Out      |                | Account Out     | 1.00  |            |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move Out with Details                     | 1988-10-17 | Category 1 | Out      |                | Account Out     |       |            | D1           | 1       | 1.00   |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move In                                   | 1991-05-10 | Category 1 | In       | Account In     |                 | 1.00  |            |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move In with Details                      | 1993-12-01 | Category 1 | In       | Account In     |                 |       |            | D1           | 1       | 1.00   |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move Transfer                             | 1996-06-23 | Category 1 | Transfer | Account In     | Account Out     | 1.00  |            |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move Transfer with Details                | 1999-01-14 | Category 1 | Transfer | Account In     | Account Out     |       |            | D1           | 1       | 1.00   |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move Transfer with Conversion             | 2001-08-07 | Category 1 | Transfer | Account In BRL | Account Out EUR | 1.00  | 10.00      |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move Transfer with Conversion and Details | 2004-02-28 | Category 1 | Transfer | Account In BRL | Account Out EUR |       |            | D1           | 1       | 1.00   | 10.00       |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move Out                                  | 2006-09-20 | Category 2 | Out      |                | Account Out     | 1.00  |            |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move Out with Details                     | 2009-04-13 | Category 2 | Out      |                | Account Out     |       |            | D1           | 1       | 1.00   |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move In                                   | 2011-11-04 | Category 2 | In       | Account In     |                 | 1.00  |            |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move In with Details                      | 2014-05-27 | Category 2 | In       | Account In     |                 |       |            | D1           | 1       | 1.00   |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move Transfer                             | 2016-12-18 | Category 2 | Transfer | Account In     | Account Out     | 1.00  |            |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move Transfer with Details                | 2019-07-11 | Category 2 | Transfer | Account In     | Account Out     |       |            | D1           | 1       | 1.00   |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move Transfer with Conversion             | 2022-01-31 | Category 2 | Transfer | Account In BRL | Account Out EUR | 1.00  | 10.00      |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move Transfer with Conversion and Details | 2024-08-24 | Category 2 | Transfer | Account In BRL | Account Out EUR |       |            | D1           | 1       | 1.00   | 10.00       |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
		And 1 email with csv will be sent
		And the order will be marked as sent
		And the order file will exist

Scenario: Gr07. All data
	Given order start date 1986-03-27
		And order end date 2024-08-24
		And order account account_out
		And order account account_in
		And order account account_out_eur
		And order account account_in_brl
		And order category Category 1
		And order category Category 2
		And an export is ordered
	When robot user login
		And export order
	Then I will receive no core error
		And order status will be Success
		And the will have creation and expiration set
		And there will be an export file with this content
			| Description                                      | Date       | Category   | Nature   | In             | Out             | Value | Conversion | Description1 | Amount1 | Value1 | Conversion1 | Description2 | Amount2 | Value2 | Conversion2 | Description3 | Amount3 | Value3 | Conversion3 | Description4 | Amount4 | Value4 | Conversion4 | Description5 | Amount5 | Value5 | Conversion5 | Description6 | Amount6 | Value6 | Conversion6 | Description7 | Amount7 | Value7 | Conversion7 | Description8 | Amount8 | Value8 | Conversion8 | Description9 | Amount9 | Value9 | Conversion9 | Description10 | Amount10 | Value10 | Conversion10 | Description11 | Amount11 | Value11 | Conversion11 | Description12 | Amount12 | Value12 | Conversion12 | Description13 | Amount13 | Value13 | Conversion13 | Description14 | Amount14 | Value14 | Conversion14 | Description15 | Amount15 | Value15 | Conversion15 | Description16 | Amount16 | Value16 | Conversion16 | Description17 | Amount17 | Value17 | Conversion17 | Description18 | Amount18 | Value18 | Conversion18 | Description19 | Amount19 | Value19 | Conversion19 | Description20 | Amount20 | Value20 | Conversion20 | Description21 | Amount21 | Value21 | Conversion21 | Description22 | Amount22 | Value22 | Conversion22 | Description23 | Amount23 | Value23 | Conversion23 | Description24 | Amount24 | Value24 | Conversion24 | Description25 | Amount25 | Value25 | Conversion25 | Description26 | Amount26 | Value26 | Conversion26 | Description27 | Amount27 | Value27 | Conversion27 | Description28 | Amount28 | Value28 | Conversion28 | Description29 | Amount29 | Value29 | Conversion29 | Description30 | Amount30 | Value30 | Conversion30 |
			| Sample Move Out                                  | 1986-03-27 | Category 1 | Out      |                | Account Out     | 1.00  |            |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move Out with Details                     | 1988-10-17 | Category 1 | Out      |                | Account Out     |       |            | D1           | 1       | 1.00   |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move In                                   | 1991-05-10 | Category 1 | In       | Account In     |                 | 1.00  |            |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move In with Details                      | 1993-12-01 | Category 1 | In       | Account In     |                 |       |            | D1           | 1       | 1.00   |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move Transfer                             | 1996-06-23 | Category 1 | Transfer | Account In     | Account Out     | 1.00  |            |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move Transfer with Details                | 1999-01-14 | Category 1 | Transfer | Account In     | Account Out     |       |            | D1           | 1       | 1.00   |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move Transfer with Conversion             | 2001-08-07 | Category 1 | Transfer | Account In BRL | Account Out EUR | 1.00  | 10.00      |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move Transfer with Conversion and Details | 2004-02-28 | Category 1 | Transfer | Account In BRL | Account Out EUR |       |            | D1           | 1       | 1.00   | 10.00       |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move Out                                  | 2006-09-20 | Category 2 | Out      |                | Account Out     | 1.00  |            |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move Out with Details                     | 2009-04-13 | Category 2 | Out      |                | Account Out     |       |            | D1           | 1       | 1.00   |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move In                                   | 2011-11-04 | Category 2 | In       | Account In     |                 | 1.00  |            |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move In with Details                      | 2014-05-27 | Category 2 | In       | Account In     |                 |       |            | D1           | 1       | 1.00   |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move Transfer                             | 2016-12-18 | Category 2 | Transfer | Account In     | Account Out     | 1.00  |            |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move Transfer with Details                | 2019-07-11 | Category 2 | Transfer | Account In     | Account Out     |       |            | D1           | 1       | 1.00   |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move Transfer with Conversion             | 2022-01-31 | Category 2 | Transfer | Account In BRL | Account Out EUR | 1.00  | 10.00      |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move Transfer with Conversion and Details | 2024-08-24 | Category 2 | Transfer | Account In BRL | Account Out EUR |       |            | D1           | 1       | 1.00   | 10.00       |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
		And 1 email with csv will be sent
		And the order will be marked as sent
		And the order file will exist

Scenario: Gr08. Not all Categories
	Given order start date 1986-03-27
		And order end date 2024-08-24
		And order account account_out
		And order account account_in
		And order account account_out_eur
		And order account account_in_brl
		And order category Category 1
		And an export is ordered
	When robot user login
		And export order
	Then I will receive no core error
		And order status will be Success
		And the will have creation and expiration set
		And there will be an export file with this content
			| Description                                      | Date       | Category   | Nature   | In             | Out             | Value | Conversion | Description1 | Amount1 | Value1 | Conversion1 | Description2 | Amount2 | Value2 | Conversion2 | Description3 | Amount3 | Value3 | Conversion3 | Description4 | Amount4 | Value4 | Conversion4 | Description5 | Amount5 | Value5 | Conversion5 | Description6 | Amount6 | Value6 | Conversion6 | Description7 | Amount7 | Value7 | Conversion7 | Description8 | Amount8 | Value8 | Conversion8 | Description9 | Amount9 | Value9 | Conversion9 | Description10 | Amount10 | Value10 | Conversion10 | Description11 | Amount11 | Value11 | Conversion11 | Description12 | Amount12 | Value12 | Conversion12 | Description13 | Amount13 | Value13 | Conversion13 | Description14 | Amount14 | Value14 | Conversion14 | Description15 | Amount15 | Value15 | Conversion15 | Description16 | Amount16 | Value16 | Conversion16 | Description17 | Amount17 | Value17 | Conversion17 | Description18 | Amount18 | Value18 | Conversion18 | Description19 | Amount19 | Value19 | Conversion19 | Description20 | Amount20 | Value20 | Conversion20 | Description21 | Amount21 | Value21 | Conversion21 | Description22 | Amount22 | Value22 | Conversion22 | Description23 | Amount23 | Value23 | Conversion23 | Description24 | Amount24 | Value24 | Conversion24 | Description25 | Amount25 | Value25 | Conversion25 | Description26 | Amount26 | Value26 | Conversion26 | Description27 | Amount27 | Value27 | Conversion27 | Description28 | Amount28 | Value28 | Conversion28 | Description29 | Amount29 | Value29 | Conversion29 | Description30 | Amount30 | Value30 | Conversion30 |
			| Sample Move Out                                  | 1986-03-27 | Category 1 | Out      |                | Account Out     | 1.00  |            |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move Out with Details                     | 1988-10-17 | Category 1 | Out      |                | Account Out     |       |            | D1           | 1       | 1.00   |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move In                                   | 1991-05-10 | Category 1 | In       | Account In     |                 | 1.00  |            |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move In with Details                      | 1993-12-01 | Category 1 | In       | Account In     |                 |       |            | D1           | 1       | 1.00   |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move Transfer                             | 1996-06-23 | Category 1 | Transfer | Account In     | Account Out     | 1.00  |            |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move Transfer with Details                | 1999-01-14 | Category 1 | Transfer | Account In     | Account Out     |       |            | D1           | 1       | 1.00   |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move Transfer with Conversion             | 2001-08-07 | Category 1 | Transfer | Account In BRL | Account Out EUR | 1.00  | 10.00      |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move Transfer with Conversion and Details | 2004-02-28 | Category 1 | Transfer | Account In BRL | Account Out EUR |       |            | D1           | 1       | 1.00   | 10.00       |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
		And 1 email with csv will be sent
		And the order will be marked as sent
		And the order file will exist

Scenario: Gr09. Not all Accounts (Out)
	Given order start date 1986-03-27
		And order end date 2024-08-24
		And order account account_out
		And order category Category 1
		And order category Category 2
		And an export is ordered
	When robot user login
		And export order
	Then I will receive no core error
		And order status will be Success
		And the will have creation and expiration set
		And there will be an export file with this content
			| Description                       | Date       | Category   | Nature   | In         | Out         | Value | Conversion | Description1 | Amount1 | Value1 | Conversion1 | Description2 | Amount2 | Value2 | Conversion2 | Description3 | Amount3 | Value3 | Conversion3 | Description4 | Amount4 | Value4 | Conversion4 | Description5 | Amount5 | Value5 | Conversion5 | Description6 | Amount6 | Value6 | Conversion6 | Description7 | Amount7 | Value7 | Conversion7 | Description8 | Amount8 | Value8 | Conversion8 | Description9 | Amount9 | Value9 | Conversion9 | Description10 | Amount10 | Value10 | Conversion10 | Description11 | Amount11 | Value11 | Conversion11 | Description12 | Amount12 | Value12 | Conversion12 | Description13 | Amount13 | Value13 | Conversion13 | Description14 | Amount14 | Value14 | Conversion14 | Description15 | Amount15 | Value15 | Conversion15 | Description16 | Amount16 | Value16 | Conversion16 | Description17 | Amount17 | Value17 | Conversion17 | Description18 | Amount18 | Value18 | Conversion18 | Description19 | Amount19 | Value19 | Conversion19 | Description20 | Amount20 | Value20 | Conversion20 | Description21 | Amount21 | Value21 | Conversion21 | Description22 | Amount22 | Value22 | Conversion22 | Description23 | Amount23 | Value23 | Conversion23 | Description24 | Amount24 | Value24 | Conversion24 | Description25 | Amount25 | Value25 | Conversion25 | Description26 | Amount26 | Value26 | Conversion26 | Description27 | Amount27 | Value27 | Conversion27 | Description28 | Amount28 | Value28 | Conversion28 | Description29 | Amount29 | Value29 | Conversion29 | Description30 | Amount30 | Value30 | Conversion30 |
			| Sample Move Out                   | 1986-03-27 | Category 1 | Out      |            | Account Out | 1.00  |            |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move Out with Details      | 1988-10-17 | Category 1 | Out      |            | Account Out |       |            | D1           | 1       | 1.00   |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move Transfer              | 1996-06-23 | Category 1 | Transfer | Account In | Account Out | 1.00  |            |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move Transfer with Details | 1999-01-14 | Category 1 | Transfer | Account In | Account Out |       |            | D1           | 1       | 1.00   |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move Out                   | 2006-09-20 | Category 2 | Out      |            | Account Out | 1.00  |            |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move Out with Details      | 2009-04-13 | Category 2 | Out      |            | Account Out |       |            | D1           | 1       | 1.00   |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move Transfer              | 2016-12-18 | Category 2 | Transfer | Account In | Account Out | 1.00  |            |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move Transfer with Details | 2019-07-11 | Category 2 | Transfer | Account In | Account Out |       |            | D1           | 1       | 1.00   |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
		And 1 email with csv will be sent
		And the order will be marked as sent
		And the order file will exist

Scenario: Gr10. Not all Accounts (In)
	Given order start date 1986-03-27
		And order end date 2024-08-24
		And order account account_in
		And order category Category 1
		And order category Category 2
		And an export is ordered
	When robot user login
		And export order
	Then I will receive no core error
		And order status will be Success
		And the will have creation and expiration set
		And there will be an export file with this content
			| Description                       | Date       | Category   | Nature   | In         | Out         | Value | Conversion | Description1 | Amount1 | Value1 | Conversion1 | Description2 | Amount2 | Value2 | Conversion2 | Description3 | Amount3 | Value3 | Conversion3 | Description4 | Amount4 | Value4 | Conversion4 | Description5 | Amount5 | Value5 | Conversion5 | Description6 | Amount6 | Value6 | Conversion6 | Description7 | Amount7 | Value7 | Conversion7 | Description8 | Amount8 | Value8 | Conversion8 | Description9 | Amount9 | Value9 | Conversion9 | Description10 | Amount10 | Value10 | Conversion10 | Description11 | Amount11 | Value11 | Conversion11 | Description12 | Amount12 | Value12 | Conversion12 | Description13 | Amount13 | Value13 | Conversion13 | Description14 | Amount14 | Value14 | Conversion14 | Description15 | Amount15 | Value15 | Conversion15 | Description16 | Amount16 | Value16 | Conversion16 | Description17 | Amount17 | Value17 | Conversion17 | Description18 | Amount18 | Value18 | Conversion18 | Description19 | Amount19 | Value19 | Conversion19 | Description20 | Amount20 | Value20 | Conversion20 | Description21 | Amount21 | Value21 | Conversion21 | Description22 | Amount22 | Value22 | Conversion22 | Description23 | Amount23 | Value23 | Conversion23 | Description24 | Amount24 | Value24 | Conversion24 | Description25 | Amount25 | Value25 | Conversion25 | Description26 | Amount26 | Value26 | Conversion26 | Description27 | Amount27 | Value27 | Conversion27 | Description28 | Amount28 | Value28 | Conversion28 | Description29 | Amount29 | Value29 | Conversion29 | Description30 | Amount30 | Value30 | Conversion30 |
			| Sample Move In                    | 1991-05-10 | Category 1 | In       | Account In |             | 1.00  |            |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move In with Details       | 1993-12-01 | Category 1 | In       | Account In |             |       |            | D1           | 1       | 1.00   |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move Transfer              | 1996-06-23 | Category 1 | Transfer | Account In | Account Out | 1.00  |            |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move Transfer with Details | 1999-01-14 | Category 1 | Transfer | Account In | Account Out |       |            | D1           | 1       | 1.00   |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move In                    | 2011-11-04 | Category 2 | In       | Account In |             | 1.00  |            |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move In with Details       | 2014-05-27 | Category 2 | In       | Account In |             |       |            | D1           | 1       | 1.00   |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move Transfer              | 2016-12-18 | Category 2 | Transfer | Account In | Account Out | 1.00  |            |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move Transfer with Details | 2019-07-11 | Category 2 | Transfer | Account In | Account Out |       |            | D1           | 1       | 1.00   |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
		And 1 email with csv will be sent
		And the order will be marked as sent
		And the order file will exist

Scenario: Gr11. Not all dates
	Given order start date 1996-12-12
		And order end date 2011-01-08
		And order account account_out
		And order account account_in
		And order account account_out_eur
		And order account account_in_brl
		And order category Category 1
		And order category Category 2
		And an export is ordered
	When robot user login
		And export order
	Then I will receive no core error
		And order status will be Success
		And the will have creation and expiration set
		And there will be an export file with this content
			| Description                                      | Date       | Category   | Nature   | In             | Out             | Value | Conversion | Description1 | Amount1 | Value1 | Conversion1 | Description2 | Amount2 | Value2 | Conversion2 | Description3 | Amount3 | Value3 | Conversion3 | Description4 | Amount4 | Value4 | Conversion4 | Description5 | Amount5 | Value5 | Conversion5 | Description6 | Amount6 | Value6 | Conversion6 | Description7 | Amount7 | Value7 | Conversion7 | Description8 | Amount8 | Value8 | Conversion8 | Description9 | Amount9 | Value9 | Conversion9 | Description10 | Amount10 | Value10 | Conversion10 | Description11 | Amount11 | Value11 | Conversion11 | Description12 | Amount12 | Value12 | Conversion12 | Description13 | Amount13 | Value13 | Conversion13 | Description14 | Amount14 | Value14 | Conversion14 | Description15 | Amount15 | Value15 | Conversion15 | Description16 | Amount16 | Value16 | Conversion16 | Description17 | Amount17 | Value17 | Conversion17 | Description18 | Amount18 | Value18 | Conversion18 | Description19 | Amount19 | Value19 | Conversion19 | Description20 | Amount20 | Value20 | Conversion20 | Description21 | Amount21 | Value21 | Conversion21 | Description22 | Amount22 | Value22 | Conversion22 | Description23 | Amount23 | Value23 | Conversion23 | Description24 | Amount24 | Value24 | Conversion24 | Description25 | Amount25 | Value25 | Conversion25 | Description26 | Amount26 | Value26 | Conversion26 | Description27 | Amount27 | Value27 | Conversion27 | Description28 | Amount28 | Value28 | Conversion28 | Description29 | Amount29 | Value29 | Conversion29 | Description30 | Amount30 | Value30 | Conversion30 |
			| Sample Move Transfer with Details                | 1999-01-14 | Category 1 | Transfer | Account In     | Account Out     |       |            | D1           | 1       | 1.00   |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move Transfer with Conversion             | 2001-08-07 | Category 1 | Transfer | Account In BRL | Account Out EUR | 1.00  | 10.00      |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move Transfer with Conversion and Details | 2004-02-28 | Category 1 | Transfer | Account In BRL | Account Out EUR |       |            | D1           | 1       | 1.00   | 10.00       |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move Out                                  | 2006-09-20 | Category 2 | Out      |                | Account Out     | 1.00  |            |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move Out with Details                     | 2009-04-13 | Category 2 | Out      |                | Account Out     |       |            | D1           | 1       | 1.00   |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
		And 1 email with csv will be sent
		And the order will be marked as sent
		And the order file will exist

Scenario: Gr12. No moves to export
	Given order start date 1955-03-15
		And order end date 1959-03-11
		And order account account_out
		And order category Category 1
		And an export is ordered
	When robot user login
		And export order
	Then I will receive no core error
		And order status will be Error
		And the will have creation and expiration not set
		And there will be no export file
		And email with csv will not be sent
		And the order will be marked as not sent
		And the order file will not exist

Scenario: Gr13. Not able to send email
	Given order start date 1986-03-27
		And order end date 1989-03-17
		And order account account_out
		And order category Category 1
		And an export is ordered
		But email system is out
	When robot user login
		And export order
	Then I will receive no core error
		And order status will be Success
		And the will have creation and expiration set
		And there will be an export file with this content
			| Description                                      | Date       | Category   | Nature   | In             | Out             | Value | Conversion | Description1 | Amount1 | Value1 | Conversion1 | Description2 | Amount2 | Value2 | Conversion2 | Description3 | Amount3 | Value3 | Conversion3 | Description4 | Amount4 | Value4 | Conversion4 | Description5 | Amount5 | Value5 | Conversion5 | Description6 | Amount6 | Value6 | Conversion6 | Description7 | Amount7 | Value7 | Conversion7 | Description8 | Amount8 | Value8 | Conversion8 | Description9 | Amount9 | Value9 | Conversion9 | Description10 | Amount10 | Value10 | Conversion10 | Description11 | Amount11 | Value11 | Conversion11 | Description12 | Amount12 | Value12 | Conversion12 | Description13 | Amount13 | Value13 | Conversion13 | Description14 | Amount14 | Value14 | Conversion14 | Description15 | Amount15 | Value15 | Conversion15 | Description16 | Amount16 | Value16 | Conversion16 | Description17 | Amount17 | Value17 | Conversion17 | Description18 | Amount18 | Value18 | Conversion18 | Description19 | Amount19 | Value19 | Conversion19 | Description20 | Amount20 | Value20 | Conversion20 | Description21 | Amount21 | Value21 | Conversion21 | Description22 | Amount22 | Value22 | Conversion22 | Description23 | Amount23 | Value23 | Conversion23 | Description24 | Amount24 | Value24 | Conversion24 | Description25 | Amount25 | Value25 | Conversion25 | Description26 | Amount26 | Value26 | Conversion26 | Description27 | Amount27 | Value27 | Conversion27 | Description28 | Amount28 | Value28 | Conversion28 | Description29 | Amount29 | Value29 | Conversion29 | Description30 | Amount30 | Value30 | Conversion30 |
			| Sample Move Out                                  | 1986-03-27 | Category 1 | Out      |                | Account Out     | 1.00  |            |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
			| Sample Move Out with Details                     | 1988-10-17 | Category 1 | Out      |                | Account Out     |       |            | D1           | 1       | 1.00   |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |              |         |        |             |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |               |          |         |              |
		But email with csv will not be sent
		And the order will be marked as not sent
		But the order file will exist
